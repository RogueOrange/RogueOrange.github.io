<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project · Gareth Coward</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body data-page="project-detail">
  <header class="topbar">
    <div class="brand">
      <div class="brand-mark">GC</div>
      <div class="brand-text">
        <div class="brand-name">Gareth Coward</div>
      </div>
    </div>
    <nav class="nav">
      <a href="index.html#home">Home</a>
      <a href="index.html#projects">Highlights</a>
      <a href="projects.html">Projects</a>
    </nav>
  </header>

  <main class="page-wrap" id="project-page">
    <section class="hero project-hero" id="project-hero">
      <div class="hero-copy">
        <p class="eyebrow" id="project-status">Project</p>
        <h1 id="project-title">Project title</h1>
        <p class="lede" id="project-subtitle">Subtitle</p>
        <div class="tags" id="project-tags"></div>
      </div>
      <div class="hero-panel">
        <div class="panel-title">In this project</div>
        <div class="panel-grid" id="project-spotlight"></div>
        <div class="inline-link">
          <a class="text-link" href="projects.html">Back to all projects →</a>
        </div>
      </div>
    </section>

    <section class="section" id="project-overview">
      <div class="section-head">
        <div>
          <p class="eyebrow">Overview</p>
          <h2 id="overview-title">Scope and story</h2>
          <p class="section-lede" id="overview-copy"></p>
        </div>
      </div>
      <div class="card-grid three" id="project-outcomes"></div>
    </section>

    <section class="section bordered" id="project-timeline">
      <div class="section-head">
        <div>
          <p class="eyebrow">Timeline</p>
          <h2>Key phases</h2>
          <p class="section-lede">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ac magna ac lacus venenatis auctor et eget nunc.</p>
        </div>
      </div>
      <div class="timeline" id="project-phases"></div>
    </section>
  </main>

  <footer class="footer">
    <div class="brand">
      <div class="brand-mark">GC</div>
      <div class="brand-text">
        <div class="brand-name">Gareth Coward</div>
      </div>
    </div>
    <div class="footer-links">
      <a href="index.html#home">Home</a>
      <a href="projects.html">Projects</a>
    </div>
    <p class="footnote">© 2024 Gareth Coward. Lorem ipsum dolor sit amet.</p>
  </footer>
  <script src="assets/js/projects-data.js"></script>
  <script>
    function buildDetailPage(project) {
      document.title = `${project.title} · Gareth Coward`;
      const status = document.getElementById('project-status');
      const title = document.getElementById('project-title');
      const subtitle = document.getElementById('project-subtitle');
      const tags = document.getElementById('project-tags');
      const spotlight = document.getElementById('project-spotlight');
      const overview = document.getElementById('overview-copy');
      const outcomes = document.getElementById('project-outcomes');
      const phases = document.getElementById('project-phases');

      status.textContent = project.status;
      title.textContent = project.title;
      subtitle.textContent = project.subtitle;

      tags.innerHTML = '';
      project.tags.forEach((tag) => {
        const chip = document.createElement('span');
        chip.className = 'chip';
        chip.textContent = tag;
        tags.appendChild(chip);
      });

      spotlight.innerHTML = '';
      (project.spotlight || []).forEach((item) => {
        const card = document.createElement('div');
        card.className = 'panel-card';
        const text = document.createElement('p');
        text.className = 'panel-copy';
        text.textContent = item;
        card.appendChild(text);
        spotlight.appendChild(card);
      });

      overview.textContent = project.overview || project.description;

      outcomes.innerHTML = '';
      (project.outcomes || []).forEach((point) => {
        const card = document.createElement('article');
        card.className = 'card soft';
        const text = document.createElement('p');
        text.textContent = point;
        card.appendChild(text);
        outcomes.appendChild(card);
      });

      phases.innerHTML = '';
      (project.timeline || []).forEach((item, index) => {
        const step = document.createElement('div');
        step.className = 'step';

        const number = document.createElement('div');
        number.className = 'step-number';
        number.textContent = String(index + 1).padStart(2, '0');
        step.appendChild(number);

        const body = document.createElement('div');
        const heading = document.createElement('h3');
        heading.textContent = item.phase;
        const copy = document.createElement('p');
        copy.textContent = item.detail;
        body.appendChild(heading);
        body.appendChild(copy);

        step.appendChild(body);
        phases.appendChild(step);
      });
    }

    function renderProjectDetail() {
      const params = new URLSearchParams(window.location.search);
      const slug = params.get('slug');
      const project = window.projectStore?.findProjectBySlug(slug);
      if (!project) {
        const container = document.getElementById('project-page');
        container.innerHTML = `
          <section class="section">
            <div class="section-head">
              <div>
                <p class="eyebrow">Not found</p>
                <h2>Project unavailable</h2>
                <p class="section-lede">That project couldn\'t be loaded. Please head back to the projects index.</p>
              </div>
            </div>
            <a class="text-link" href="projects.html">Return to projects →</a>
          </section>`;
        return;
      }

      buildDetailPage(project);
    }

    document.addEventListener('DOMContentLoaded', renderProjectDetail);
  </script>
</body>
</html>
